{"version":3,"sources":["webpack://PRSS/webpack/universalModuleDefinition","webpack://PRSS/webpack/bootstrap","webpack://PRSS/webpack/runtime/define property getters","webpack://PRSS/webpack/runtime/hasOwnProperty shorthand","webpack://PRSS/webpack/runtime/make namespace object","webpack://PRSS/./src/index.js"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","bufferItem","items","init","data","console","error","getProp","s","bufferItemOverride","objGet","getJsonProp","output","propExists","JSON","parse","e","split","reduce","a","b","getAllProps","getSiteUrl","siteUrl","replaceAll","getPathUrl","p","length","timeAgo","date","timeAgoInSeconds","name","seconds","interval","Math","floor","epoch","getDuration","Date","suffix","formattedDate","d","ye","Intl","DateTimeFormat","year","format","mo","month","da","day","getStructurePaths","nodes","prefix","store","forEach","node","pathNode","curPath","push","children","getRawPostItem","postId","itemsOverride","PRSSItems","find","item","uuid","stripShortcodes","html","matchAll","match","fullMatch","replace","truncateString","str","maxLength","trim","substring","removeTagsFromElem","doc","tags","tag","querySelectorAll","elem","innerHTML","stripTags","rawHtml","DOMParser","parseFromString","body","textContent","setContent","selector","shouldAppend","createIfMissing","element","document","querySelector","includes","tagName","className","createElement","appendChild","getItemBySlug","slug","getItems","getComponent","template","getItem","appendToHead","head","appendToBody","itemTemplate","sortItems","structure","parsedItems","map","post","postPath","slice","join","path","url","outputItems","Array","isArray","filter","sort","createdAt","walkStructure","itemCb","outputNodes","parseNodes","shuffle","temporaryValue","randomIndex","arr","newArr","currentIndex","random","hasItem","stringify","findInStructure","foundItem","some","checkNode","getItemChildren","itemId","structureItem","childItem","getItemChildrenBySlug","truncateStr","len"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PRSS\"] = factory();\n\telse\n\t\troot[\"PRSS\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","let bufferItem = null;\r\nlet items = null;\r\n\r\nexport const init = (data) => {\r\n    if(data) {\r\n        bufferItem = data;\r\n    } else {\r\n        console.error(\"Attempted to load empty data\", data);\r\n    }\r\n};\r\n\r\nexport const getProp = (s, bufferItemOverride) => {\r\n    if (!bufferItem && !bufferItemOverride) {\r\n        return undefined;\r\n    }\r\n\r\n    return objGet(s, bufferItemOverride || bufferItem);\r\n};\r\n\r\nexport const getJsonProp = (s) => {\r\n    let output;\r\n\r\n    if (propExists(s)) {\r\n        try {\r\n            output = JSON.parse(getProp(s));\r\n        } catch (e) {\r\n            console.error(`Prop '${s}' could not be parsed.`, e);\r\n        }\r\n    }\r\n\r\n    return output;\r\n};\r\n\r\nexport const propExists = (s) => {\r\n    return typeof getProp(s) !== 'undefined';\r\n};\r\n\r\nexport const objGet = (s, obj) =>\r\n    s.split('.').reduce((a, b) => (a ? a[b] : ''), obj);\r\n\r\nexport const getAllProps = () => {\r\n    return bufferItem;\r\n};\r\n\r\nexport const getSiteUrl = () => {\r\n    const siteUrl = getProp('site.url');\r\n    if(siteUrl){\r\n        return siteUrl.replaceAll(\"localhost:9000\", \"localhost:3000\");\r\n    } else {\r\n        return \"http://localhost:3000\";\r\n    }\r\n};\r\n\r\nexport const getPathUrl = (p = '') => {\r\n    let siteUrl = getSiteUrl();\r\n    if (siteUrl && siteUrl.length && siteUrl[siteUrl.length - 1] !== '/') {\r\n        siteUrl += '/';\r\n    }\r\n\r\n    if (p && p.length && p[p.length - 1] !== '/') {\r\n        p += '/';\r\n    }\r\n\r\n    return siteUrl + p;\r\n};\r\n\r\nconst getDuration = (timeAgoInSeconds) => {\r\n    const epochs = [\r\n        ['year', 31536000],\r\n        ['month', 2592000],\r\n        ['day', 86400],\r\n        ['hour', 3600],\r\n        ['minute', 60],\r\n        ['second', 1]\r\n    ];\r\n\r\n    for (let [name, seconds] of epochs) {\r\n        const interval = Math.floor(timeAgoInSeconds / seconds);\r\n\r\n        if (interval >= 1) {\r\n            return {\r\n                interval: interval,\r\n                epoch: name\r\n            };\r\n        } else {\r\n            return {\r\n                interval: 0,\r\n                epoch: \"minute\"\r\n            };\r\n        }\r\n    }\r\n};\r\n\r\nexport const timeAgo = (date) => {\r\n    const timeAgoInSeconds = Math.floor((new Date() - new Date(date)) / 1000);\r\n    const { interval, epoch } = getDuration(timeAgoInSeconds);\r\n    const suffix = interval === 1 ? '' : 's';\r\n\r\n    return `${interval} ${epoch}${suffix} ago`;\r\n};\r\n\r\nexport const formattedDate = (date) => {\r\n    const d = new Date(date);\r\n    const ye = new Intl.DateTimeFormat('en', { year: 'numeric' }).format(d);\r\n    const mo = new Intl.DateTimeFormat('en', { month: 'short' }).format(d);\r\n    const da = new Intl.DateTimeFormat('en', { day: '2-digit' }).format(d);\r\n\r\n    return `${da} ${mo}, ${ye}`;\r\n};\r\n\r\nexport const getStructurePaths = (nodes, prefix = '', store = []) => {\r\n    nodes.forEach((node) => {\r\n        const pathNode = node.key;\r\n        const curPath = `${prefix}/${pathNode}`;\r\n\r\n        store.push(curPath);\r\n\r\n        if (node.children) {\r\n            getStructurePaths(node.children, curPath, store);\r\n        }\r\n    });\r\n\r\n    return store;\r\n};\r\n\r\nexport const getRawPostItem = (postId, itemsOverride) => {\r\n    const prssItems = itemsOverride || PRSSItems || [];\r\n\r\n    return prssItems.find((item) => {\r\n        return item.uuid === postId;\r\n    });\r\n};\r\n\r\nexport const stripShortcodes = (html) => {\r\n    let output = html;\r\n    const shortcodeRegex =\r\n        /\\[([a-zA-Z]+)=?([a-zA-Z0-9]+)?\\](.+?)\\[\\/[a-zA-Z]+\\]?/gi;\r\n    const matches = [...output.matchAll(shortcodeRegex)];\r\n    matches.forEach((match) => {\r\n        const [fullMatch] = match;\r\n\r\n        if (fullMatch) {\r\n            output = output.replace(fullMatch, \"\");\r\n        }\r\n    });\r\n    return output;\r\n};\r\n\r\nexport const truncateString = (str = \"\", maxLength = 50) => {\r\n    const output = str.replace(/\"/g, \"\").replace(/\\s+/g, \" \").trim();\r\n    if (!output) return null;\r\n    if (output.length <= maxLength) return output;\r\n    return `${output.substring(0, maxLength)}...`;\r\n};\r\n\r\nexport const removeTagsFromElem = (doc, tags) =>\r\n    tags.forEach((tag) =>\r\n        doc.querySelectorAll(tag).forEach((elem) => (elem.innerHTML = \"\"))\r\n    );\r\n\r\nexport const stripTags = (html) => {\r\n    const rawHtml = stripShortcodes(html);\r\n    const doc = new DOMParser().parseFromString(rawHtml, \"text/html\");\r\n    removeTagsFromElem(doc, [\"pre\", \"h1\", \"h2\"]);\r\n    return doc.body.textContent || \"\";\r\n};\r\n\r\nexport const setContent = (selector, html, createIfMissing = false) => {\r\n    let element = document.querySelector(selector);\r\n    let shouldAppend;\r\n\r\n    if(!element && createIfMissing && selector.includes(\".\") && selector.split(\".\").length === 2){\r\n        const [tagName, className] = selector.split(\".\");\r\n        element = document.createElement(tagName);\r\n        element.className = className;\r\n        shouldAppend = true;\r\n    }\r\n\r\n    if(element){\r\n        element.innerHTML = html;\r\n    }\r\n\r\n    if(shouldAppend){\r\n        document.body.appendChild(element);\r\n    }\r\n};\r\n\r\nexport const getItemBySlug = (slug) => {\r\n    return getItems().find((item) => item.slug === slug);\r\n};\r\n\r\nexport const getComponent = (slug) => {\r\n    return getItems().find((item) => item.template === \"component\" && item.slug === slug);\r\n};\r\n\r\nexport const getItem = (postId) => {\r\n    const item = getItems().find((item) => item.uuid === postId);\r\n\r\n    if(!item){\r\n        console.error(`getItem: No item found with id ${postId}`);\r\n    } else {\r\n        return item;\r\n    }\r\n};\r\n\r\nexport const appendToHead = (html) => document.head.innerHTML += html;\r\n\r\nexport const appendToBody = (html) => document.body.innerHTML += html;\r\n\r\nexport const getItems = (itemTemplate, sortItems, itemsOverride) => {\r\n    if (!PRSSItems && !itemsOverride) {\r\n        console.error(\"getItems: No PRSSItems found.\");\r\n        return [];\r\n    }\r\n\r\n    const { structure } = getProp('site');\r\n    const structurePaths = getStructurePaths(structure);\r\n\r\n    const parsedItems =\r\n        structurePaths.map((item) => {\r\n            const path = item.split('/');\r\n            let post;\r\n\r\n            const mappedPath = path.map((postId) => {\r\n                if (!postId) {\r\n                    return '';\r\n                }\r\n\r\n                post = getRawPostItem(postId);\r\n                return post ? post.slug : '';\r\n            });\r\n\r\n            const basePostPathArr = mappedPath.slice(2);\r\n            const postPath = basePostPathArr.join('/');\r\n\r\n            return post\r\n                ? {\r\n                    ...post,\r\n                    path: postPath,\r\n                    url: getPathUrl(postPath)\r\n                }\r\n                : null;\r\n        });\r\n\r\n    if (!items && parsedItems.length && !itemsOverride) {\r\n        items = parsedItems;\r\n    }\r\n\r\n    let outputItems = parsedItems;\r\n\r\n    if (itemTemplate) {\r\n        if(Array.isArray(itemTemplate)){\r\n            outputItems = outputItems.filter((item) => itemTemplate.includes(item.template));\r\n        } else {\r\n            outputItems = outputItems.filter(\r\n                (item) => item.template === itemTemplate\r\n            );\r\n        }\r\n    }\r\n\r\n    if (sortItems) {\r\n        outputItems = outputItems.sort((a, b) => b.createdAt - a.createdAt);\r\n    }\r\n\r\n    if(itemsOverride){\r\n        outputItems = outputItems.filter((item) => !!itemsOverride.find(({ uuid }) => uuid === item.uuid));\r\n    }\r\n\r\n    return outputItems;\r\n};\r\n\r\nexport const walkStructure = (nodes, itemCb = null) => {\r\n    let outputNodes = [...nodes];\r\n\r\n    const parseNodes = (obj) => {\r\n        const { key, children = [] } = obj;\r\n        const post = getRawPostItem(key);\r\n\r\n        if (!post) return obj;\r\n\r\n        const parsedNode = {\r\n            key,\r\n            ...(itemCb ? itemCb(post) : {}),\r\n            children: children.map(parseNodes)\r\n        };\r\n\r\n        return parsedNode;\r\n    };\r\n\r\n    outputNodes = outputNodes.map((node) => parseNodes(node));\r\n\r\n    return outputNodes;\r\n};\r\n\r\nexport const shuffle = (arr = []) => {\r\n    const newArr = [...arr];\r\n    let currentIndex = newArr.length,\r\n        temporaryValue,\r\n        randomIndex;\r\n\r\n    while (0 !== currentIndex) {\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n        temporaryValue = newArr[currentIndex];\r\n        newArr[currentIndex] = newArr[randomIndex];\r\n        newArr[randomIndex] = temporaryValue;\r\n    }\r\n\r\n    return newArr;\r\n};\r\n\r\nexport const hasItem = (uuid, nodes) => {\r\n    return JSON.stringify(nodes).includes(uuid);\r\n};\r\n\r\nexport const findInStructure = (postId) => {\r\n    const { structure } = getProp('site');\r\n    let foundItem;\r\n\r\n    const checkNode = (node) => {\r\n        if (node.key === postId) {\r\n            foundItem = node;\r\n            return true;\r\n        } else {\r\n            return node.children ? node.children.some(checkNode) : false;\r\n        }\r\n    };\r\n\r\n    structure.some(checkNode);\r\n    return foundItem;\r\n};\r\n\r\nexport const getItemChildren = (itemId) => {\r\n    const structureItem = findInStructure(itemId);\r\n    const structureItemChildren =\r\n        structureItem && structureItem.children ? structureItem.children : [];\r\n    return structureItemChildren.map((childItem) => getItem(childItem.key));\r\n};\r\n\r\nexport const getItemChildrenBySlug = (slug) => {\r\n    const itemId = getItemBySlug(slug)?.uuid;\r\n    return getItemChildren(itemId);\r\n};\r\n\r\nexport const truncateStr = (str, len = 50) => {\r\n    if (str.length > len) return str.substring(0, len) + '...';\r\n    else return str;\r\n};\r\n"],"sourceRoot":""}